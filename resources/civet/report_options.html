---
layout: default
---

<h1>Report options</h1>

<p>How to customise the civet report.</p>
 
<h2>Report content and report preset options</h2>
 
<p>Each element of the civet report is associated with a number:</p>

<ol class="listWithCode">
	<li> Tables describing the queries</li>
    <li> Summarise the phylogenetic context of the queries in table form</li>
    <li> Show phylogenetic trees of the queries and their surrounding phylogenetic context, known as "catchments"</li>
    <li> Show "snpit" plot of each catchment, which visualises the SNPs found in each query sequence compared to the reference sequence.</li>
    <li> Produces timelines of queries per catchment</li>
    <li> Summarises Pango lineages found in the background dataset at appropriate geographical level (eg country) and displays them on a map.</li>
    <li> Plots queries as dots on a map</li>
</ol>
<br>
<p>Provide combinations of these letters as a comma separated string to define the elements present in the report.</p>
<br>
<p>You can also use presets report configuration using <span class="code">-rp/--report-preset</span>:</p>
<br>
<col class="listWithCode">
	<li> hold_the_sauce: 1,2 (just summary tables, no figures)</li>
    <li>the_usual : 1,2,3,4,5 (All figures except maps)</li>
    <li>the_works : 1,2,3,4,5,7 (All figures except background diversity map)</li>
    <li>the_whole_shebang : 1,2,3,4,5,6,7 (everything!)</li>
</col>
<br>
<p><strong>Default:</strong><br> the usual (1,2,3,4,5)</p>
<br>
<p>
<strong>Usage: </strong><br>
--report-content {$LIST} or -rc {$LIST} <br>
--report-preset {$PRESET} or -rp {$PRESET} <br>
</p>

<h2>Report title</h2>

<p>Title to show at the top of the report.</p>
<br>
<p><strong>Default:</strong><br> civet report</p>
<br>
<p>
<strong>Usage: </strong><br> 
--report-title {$TITLE} or -rt {$TITLE}<br>
</p>

<h2>Colour theme</h2>
<br>
<p>Report theme colour, specifiy a HEX colour code to colour the panels and highlighting in the report.</p>
<br>
<p><strong>Default:</strong><br> #7178bc</p>
<br>
<p>
<strong>Usage: </strong><br>
-ct/--colour-theme {$HEX_CODE}
</p>

<h2>Colour map</h2>
<br>
<p>Comma separated string of HEX codes or HTML-support names to colour factors in different figures in the report by.</p>
<br>
<p><strong>Default:</strong><br> civet logo colours</p>
<br>
<p>
<strong>Usage: </strong><br>
--colour-map/-cmap {$LIST}
</p>
<br>
<h2>Report column and anonymise</h2>
<br>
<p>Controls how queries are referred to in the report tables and figures.</p>
 
<p>Either, you may provide a column in the metadata to refer to queries by using <span class="code">-rcol/--report-column</span> (e.g. can be useful for referring to patient IDs).</p>
 
<p>Alternatively, the <span class="code">--anonymise</span> flag will provide an arbitrary number to refer to the sequence by.</p>
<br>
<p><strong>Default:</strong><br> False</p>
<br>
<p>
<strong>Usage: </strong><br>
--report-column{$COLUMN_NAME} or -rcol {$COLUMN_NAME}<br>
--anonymise<br>
</p>
 
<h2>Location column</h2>
<br>
<p>Column containing location information in the background metadata csv. If present, it will be displayed by default in query and catchment summary tables. </p>
<br>
<p><strong>Default:</strong><br> 
country</p>
<br>
<p>
<strong>Usage: </strong><br>
-lcol/--location-column {$COLUMN_NAME}<br>
</p>
<br>
<h2>Date column and background date column</h2>
<br>
<p>Columns in the input query csv and background csv respectively that contain date information. If present, it will be displayed by default in query and catchment summary tables.</p>
<br>
<p>
<strong>Default:</strong><br> 
sample_date
</p>
<p>
<strong>Usage: </strong><br>
--date-column{$COLUMN_NAME} or -dcol {$COLUMN_NAME}<br>
--background-date-column{$COLUMN_NAME} or -bdate {$COLUMN_NAME}
</p>
<br>
<h2>Table content and catchment table</h2>
<br>
<p>Comma separated strings to define what is present in the query summary tables (report option 1) and the catchment summary tables (report option 2).</p>

<p>
<strong>Default:</strong><br> 
Table content: --background_column,--background_date_column,source,lineage,country,catchment<br>
Catchment table: count,country,lineage</br>
</p>
<p>
<strong>Usage: </strong><br>
--date-column{$COLUMN_NAME} or -dcol {$COLUMN_NAME} <br>
--background-date-column{$COLUMN_NAME} or -bdate {$COLUMN_NAME}<br>
</p>
<br> 
<p><strong>Usage: </strong><br>
--table-content {$LIST}<br>
--catchment-table {$LIST}<br>
</p>

<h2>Timeline dates and timeline colours (report option 5)</h2>
 
<p>Provide a comma separated list of column headers present in the query metadata or background metadata to plot in the timeline, and hex codes or names to colour each dot by. If providing colours, please provide the same number of colours as the number of fields displayed in the timeline.</p>
 
<p>
<strong>Default:</strong><br> 
sample_date or --date-column if provided
<br></p>
<p><strong>Usage: </strong><br>
--timeline-dates {$LIST_HEADERS} or -td {$LIST_HEADERS}<br>
--timeline-colours {$LIST_HEXES}<br>
</p>
 
 
 

<h2>Mapping options</h2>

 
<p>There are two types of mapping in civet:</p>
<col class="listWithCode">
	<li>Plot background diversity of lineages in the area of interest (report option 6)</li>
    <li>Plot where your queries are (report option 7)</li>
</col>
 
<p>Both maps will show a default first view, but it is possible to alter that view by using the mouse wheel to zoom in and out, and by clicking and dragging on the map itself.</p>
 
<h2>Mapping queries (report option 6)</h2>
 
<p>This option allows you to plot queries on a map using their coordinates.</p>
 
<p>
Arguments:<br>
--query-map-file/-qmfile <br>the underlying map file that the dots will be plotted on. Default: world map<br>
--latitude-column/-lat <br>column in the metadata that contains latitude information for queries. Default: latitude<br>
--longitude-column/-long <br>column in the metadata that contains longitude information for queries. Default: longitude<br>
</p>
<br>
<h2>Mapping background diversity (report option 7)</h2>


<p>This option summarises the PANGO lineages as radial charts during a set time period at a specific geographical level. Only lineages that make up more than 5% of the overall sequence count are shown, with others shown under “other”.</p>
 
<p>For more information on PANGO lineages, see https://www.pango.network/</p>
 
<p>
<strong>Arguments:</strong><br>
-bmfile--background-map-file<br>the underlying map file that the radial charts will be displayed on.<br>

<strong>Default</strong><br>: world map<br>
--centroid-file<br>
file containing centroids of locations that lineages are summarised by, used to place radial plots on the map. Only necessary if a custom background map file is provided.<br>
-bmrange/--background-map-date-range<br>Date range to restrict summary to. This can either be in terms of two dates (inclusive) in the format YYYY-MM-DD separated by a “:” (eg) or a single integer specifying the number of days either side of the date range of the queries. Eg --background-map-date-range 2020-09-10:2020-09-30 or --background-map-date-range 10 <br>

<strong>Default</strong><br>: 2019-11-01 to present day<br>
-bmcol/--background-map-column<br>
column in the background dataset containing geographical information to summarise PANGO lineages by. Must correspond to locations in the centroid file and background map file. <br>

<strong>Default</strong><br>: --location-column (country by default)<br>

--background-map-location/-bmloc<br>
comma separated list of locations to show background lineage diversity for. Must be valid locations matching the map file and the centroid file. 
<br>
<strong>Default</strong><br>: all valid locations in the background metadata file in the appropriate column.<br>
<br>

<strong>NB if the environment variable civet_mode is set to CLIMB, the default for the background-map-column is “suggested_adm2_grouping” instead, with the corresponding map and centroid files. This is an output of the COG-UK data processing pipeline, and is a version of the administrative level 2 (roughly county) of where the sequence was sampled. See https://github.com/COG-UK/docs/blob/master/geography_cleaning.md for more information.</strong>
</p>